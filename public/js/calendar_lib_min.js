!function (t, e) { "object" == typeof exports && "undefined" != typeof module ? e(exports) : "function" == typeof define && define.amd ? define(["exports"], e) : e((t = t || self).CalendarBase = {}) }(this, (function (t) { "use strict"; t.Calendar = function () { function t(t) { var e = void 0 === t ? {} : t, a = e.startDate, n = e.endDate, r = void 0 === n ? null : n, s = e.siblingMonths, i = void 0 !== s && s, o = e.weekNumbers, h = void 0 !== o && o, d = e.weekStart, y = void 0 === d ? 0 : d; this.startDate = void 0 === a ? null : a, this.endDate = r, this.siblingMonths = i, this.weekNumbers = h, this.weekStart = y } var e = t.prototype; return e.getCalendar = function (e, a) { var n = new Date(Date.UTC(e, a, 1, 0, 0, 0, 0)); e = n.getUTCFullYear(), a = n.getUTCMonth(); for (var r, s, i, o, h = [], d = n.getUTCDay(), y = -(7 - this.weekStart + d) % 7, u = t.daysInMonth(e, a), D = (u - y) % 7, l = t.daysInMonth(e, a - 1), f = y, c = !1, m = null, v = u - f + (0 !== D ? 7 - D : 0) + y; f < v;)r = ((f < 1 ? 7 + f : f) + d) % 7, (s = f + 1) < 1 || s > u ? this.siblingMonths ? (s < 1 ? (o = e, (i = a - 1) < 0 && (i = 11, o--), s = l + s) : s > u && (o = e, (i = a + 1) > 11 && (i = 0, o++), s = f - u + 1), void 0 !== i && void 0 !== o && (c = { day: s, weekDay: r, month: i, year: o, siblingMonth: !0 })) : c = !1 : c = { day: s, weekDay: r, month: a, year: e }, c && this.weekNumbers && (null === m ? m = t.calculateWeekNumber(c) : 1 === r && 52 === m ? m = 1 : 1 === r && m++, c.weekNumber = m), c && this.startDate && (c.selected = this.isDateSelected(c)), h.push(c), f++; return h }, e.isDateSelected = function (t) { return !(!this.startDate || (t.year !== this.startDate.year || t.month !== this.startDate.month || t.day !== this.startDate.day) && (!this.endDate || t.year === this.startDate.year && t.month === this.startDate.month && t.day < this.startDate.day || t.year === this.endDate.year && t.month === this.endDate.month && t.day > this.endDate.day || t.year === this.startDate.year && t.month < this.startDate.month || t.year === this.endDate.year && t.month > this.endDate.month || t.year < this.startDate.year || t.year > this.endDate.year)) }, e.setStartDate = function (t) { this.startDate = t }, e.setEndDate = function (t) { this.endDate = t }, e.setDate = function (t) { return this.setStartDate(t) }, t.diff = function (t, e) { var a = new Date(Date.UTC(t.year, t.month, t.day, 0, 0, 0, 0)), n = new Date(Date.UTC(e.year, e.month, e.day, 0, 0, 0, 0)); return Math.ceil((a.getTime() - n.getTime()) / 864e5) }, t.interval = function (e, a) { return Math.abs(t.diff(e, a)) + 1 }, t.compare = function (t, e) { if ("object" != typeof t || "object" != typeof e || null === t || null === e) throw new TypeError("dates must be objects"); return t.year < e.year ? -1 : t.year > e.year ? 1 : t.month < e.month ? -1 : t.month > e.month ? 1 : t.day < e.day ? -1 : t.day > e.day ? 1 : 0 }, t.daysInMonth = function (t, e) { return new Date(t, e + 1, 0).getDate() }, t.isLeapYear = function (t) { return t % 4 == 0 && t % 100 != 0 || t % 400 == 0 }, t.calculateWeekNumber = function (t) { var e = new Date(Date.UTC(t.year, t.month, t.day, 0, 0, 0, 0)), a = new Date(e.valueOf()), n = (e.getUTCDay() + 6) % 7; a.setUTCDate(a.getUTCDate() - n + 3); var r = a.valueOf(); return a.setUTCMonth(0, 1), 4 !== a.getUTCDay() && a.setUTCMonth(0, 1 + (4 - a.getUTCDay() + 7) % 7), 1 + Math.ceil((r - a.getTime()) / 6048e5) }, t }(), Object.defineProperty(t, "__esModule", { value: !0 }) }));
